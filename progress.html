<!DOCTYPE html>
<html>
<head>
  <title>
    progress bars
  </title>

  <style>
    @import url('https://fonts.googleapis.com/css?family=Patua+One');

    span {
      position: absolute;
      font-family: 'Patua One', cursive;
      font-size: 4em;
      color: #EAEAEA;
      padding: 0.25em;
    }
  </style>

  <script>
    function getTimeYear(offset = 0) {
      var d = new Date()
      d.setFullYear(d.getFullYear() + offset, 0, 1)
      d.setHours(0)
      d.setMinutes(0)
      d.setSeconds(0)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function getTimeMonth(offset = 0) {
      var d = new Date()
      d.setFullYear(d.getFullYear(), d.getMonth() + offset, 1)
      d.setHours(0)
      d.setMinutes(0)
      d.setSeconds(0)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function getTimeDay(offset = 0) {
      var d = new Date()
      d.setFullYear(d.getFullYear(), d.getMonth(), d.getDate() + offset)
      d.setHours(0)
      d.setMinutes(0)
      d.setSeconds(0)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function getTimeHours(offset = 0) {
      var d = new Date()
      d.setHours(d.getHours() + offset)
      d.setMinutes(0)
      d.setSeconds(0)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function getTimeMinutes(offset = 0) {
      var d = new Date()
      d.setMinutes(d.getMinutes() + offset)
      d.setSeconds(0)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function getTimeSeconds(offset = 0) {
      var d = new Date()
      d.setSeconds(d.getSeconds() + offset)
      d.setMilliseconds(0)
      return d.getTime()
    }

    function createBar(name, color, timeFunction) {
      var bar = document.createElement("div")
      var txt = document.createElement("span")

      bar.setAttribute("class", "bar")
      bar.setAttribute("name", name)
      bar.setAttribute("time", timeFunction)

      bar.style.position = "absolute"
      bar.style.left = "0px"
      bar.style.background = color

      txt.setAttribute("class", "txt")
      txt.innerHTML = name

      document.body.appendChild(bar)
      document.body.appendChild(txt)
    }

    window.onload = function init() {
      createBar("years", "#0166EE", "getTimeYear")
      createBar("months", "#0074F1", "getTimeMonth")
      createBar("days", "#0083F4", "getTimeDay")
      createBar("hours", "#0091F8", "getTimeHours")
      createBar("minutes", "#00A0FB", "getTimeMinutes")
      createBar("seconds", "#00AFFF", "getTimeSeconds")
    }

    function executeFunctionByName(functionName, context) {
      var args = Array.prototype.slice.call(arguments, 2);
      var namespaces = functionName.split(".");
      var func = namespaces.pop();
      for(var i = 0; i < namespaces.length; i++) {
        context = context[namespaces[i]];
      }
      return context[func].apply(context, args);
    }

    var loop = setInterval(function(){
      var bars = document.getElementsByClassName('bar')
      var txts = document.getElementsByClassName('txt')

      for (var i = 0; i < bars.length; i++) {
        var startTime = executeFunctionByName(bars[i].getAttribute("time"), window)
        var endTime = executeFunctionByName(bars[i].getAttribute("time"), window, 1)

        bars[i].style.width = window.innerWidth * (new Date().getTime() - startTime) / (endTime - startTime) + "px"
        bars[i].style.height = window.innerHeight / bars.length + "px"
        bars[i].style.top = i * bars[i].style.height.slice(0, -2) + "px"

        txts[i].style.height = window.innerHeight / bars.length + "px"
        txts[i].style.top = i * bars[i].style.height.slice(0, -2) + "px"
      }
    }, 16)
  </script>
</head>
</html>
